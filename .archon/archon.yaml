global:
  name: "keycloak-sample-app"
  prebuild: ".archon/prebuild.sh"
deployments:
  - name: "keycloak-main"
    tag: "test-21.0-archon"
    description: |-
      This is the main Keycloak deployment.
    working-directory: "./main"
    prebuild: "prebuild.sh"
    postbuild: "postbuild.sh"
    build_scripts:
      - "./mvnw -f dist/pom.xml clean install"
      - "cd quarkus"
      - "./mvnw -f ./pom.xml clean install -DskipTestsuite -DskipExamples -DskipTests"
      - "./mvnw clean install -DskipTests"
      - "cd .."
    build:
      dockerfile: "Dockerfile"
      args:
        - "KEYCLOAK_VERSION=21.0.0"
    characteristics:
      fips:
        enabled: false
        description: |-
          FIPS mode is not enabled for this deployment.